Changes in component 'nf-core/sourmash/sketch'
'modules/nf-core/sourmash/sketch/meta.yml' is unchanged
Changes in 'sourmash/sketch/main.nf':
--- modules/nf-core/sourmash/sketch/main.nf
+++ modules/nf-core/sourmash/sketch/main.nf
@@ -8,7 +8,7 @@
         'biocontainers/sourmash:4.9.4--hdfd78af_0' }"
 
     input:
-    tuple val(meta), path(sequence)
+    tuple val(meta), path(library, stageAs: 'library/*')
 
     output:
     tuple val(meta), path("*.sig"), emit: signatures
@@ -22,11 +22,13 @@
     def args = task.ext.args ?: "dna --param-string 'scaled=1000,k=21,k=31,k=51,abund'"
     def prefix = task.ext.prefix ?: "${meta.id}"
     """
+    ls library/* > library.txt
+
     sourmash sketch \\
         $args \\
         --merge '${prefix}' \\
         --output '${prefix}.sig' \\
-        $sequence
+        --from-file library.txt
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -35,8 +37,17 @@
     """
 
     stub:
+    def args = task.ext.args ?: "dna --param-string 'scaled=1000,k=21,k=31,k=51,abund'"
     def prefix = task.ext.prefix   ?: "${meta.id}"
     """
+    ls library/* > library.txt
+
+    echo sourmash sketch \\
+        $args \\
+        --merge '${prefix}' \\
+        --output '${prefix}.sig' \\
+        --from-file library.txt
+
     touch ${prefix}.sig
 
     cat <<-END_VERSIONS > versions.yml

'modules/nf-core/sourmash/sketch/environment.yml' is unchanged
Changes in 'sourmash/sketch/tests/main.nf.test.snap':
--- modules/nf-core/sourmash/sketch/tests/main.nf.test.snap
+++ modules/nf-core/sourmash/sketch/tests/main.nf.test.snap
@@ -43,7 +43,7 @@
                             "id": "test",
                             "single_end": false
                         },
-                        "test.sig:md5,f26ea720e836157336e5f649c98b29f6"
+                        "test.sig:md5,210ec796e0496fd5ec2cf6fb7a18487e"
                     ]
                 ],
                 "1": [
@@ -55,7 +55,7 @@
                             "id": "test",
                             "single_end": false
                         },
-                        "test.sig:md5,f26ea720e836157336e5f649c98b29f6"
+                        "test.sig:md5,210ec796e0496fd5ec2cf6fb7a18487e"
                     ]
                 ],
                 "versions": [
@@ -67,6 +67,6 @@
             "nf-test": "0.9.2",
             "nextflow": "25.04.7"
         },
-        "timestamp": "2025-09-11T11:32:59.417350322"
+        "timestamp": "2025-09-15T14:37:08.977063642"
     }
 }
'modules/nf-core/sourmash/sketch/tests/main.nf.test' is unchanged
************************************************************
