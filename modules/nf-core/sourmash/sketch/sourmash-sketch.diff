Changes in component 'nf-core/sourmash/sketch'
'modules/nf-core/sourmash/sketch/environment.yml' is unchanged
'modules/nf-core/sourmash/sketch/meta.yml' is unchanged
Changes in 'sourmash/sketch/main.nf':
--- modules/nf-core/sourmash/sketch/main.nf
+++ modules/nf-core/sourmash/sketch/main.nf
@@ -1,18 +1,18 @@
 process SOURMASH_SKETCH {
-    tag "$meta.id"
+    tag "${meta.id}"
     label 'process_single'
 
     conda "${moduleDir}/environment.yml"
-    container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://depot.galaxyproject.org/singularity/sourmash:4.9.4--hdfd78af_0':
-        'biocontainers/sourmash:4.9.4--hdfd78af_0' }"
+    container "${workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container
+        ? 'https://depot.galaxyproject.org/singularity/sourmash:4.9.4--hdfd78af_0'
+        : 'biocontainers/sourmash:4.9.4--hdfd78af_0'}"
 
     input:
-    tuple val(meta), path(sequence)
+    tuple val(meta), path(library, stageAs: 'library/*')
 
     output:
     tuple val(meta), path("*.sig"), emit: signatures
-    path "versions.yml"           , emit: versions
+    path "versions.yml", emit: versions
 
     when:
     task.ext.when == null || task.ext.when
@@ -22,11 +22,13 @@
     def args = task.ext.args ?: "dna --param-string 'scaled=1000,k=21,k=31,k=51,abund'"
     def prefix = task.ext.prefix ?: "${meta.id}"
     """
+    ls library/* > library.txt
+
     sourmash sketch \\
-        $args \\
+        ${args} \\
         --merge '${prefix}' \\
         --output '${prefix}.sig' \\
-        $sequence
+        --from-file library.txt
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -35,9 +37,16 @@
     """
 
     stub:
-    def prefix = task.ext.prefix   ?: "${meta.id}"
+    def args = task.ext.args ?: "dna --param-string 'scaled=1000,k=21,k=31,k=51,abund'"
+    def prefix = task.ext.prefix ?: "${meta.id}"
     """
-    touch ${prefix}.sig
+    ls library/* > library.txt
+
+    echo sourmash sketch \\
+        ${args} \\
+        --merge '${prefix}' \\
+        --output '${prefix}.sig' \\
+        --from-file library.txt
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":

'modules/nf-core/sourmash/sketch/tests/main.nf.test' is unchanged
'modules/nf-core/sourmash/sketch/tests/main.nf.test.snap' is unchanged
************************************************************
